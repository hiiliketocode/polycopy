[dotenv@17.2.3] injecting env (34) from .env.local -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
ğŸš€ Starting Gemini market classification
ğŸ“Š Gemini batch size: 50 markets per API call
ğŸ“¦ DB batch size: 100 markets per fetch
â±ï¸  Sleep between API calls: 2000ms
ğŸ“Š Limit: 1000 markets
ğŸ’¾ Output file: /Users/rawdonmessenger/PolyCopy/gemini-classifications.json
âš ï¸  This will OVERWRITE existing classifications


ğŸ“¦ Fetched 100 markets from database (offset: 0)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
âš ï¸  Rate limit hit, retrying in 20000ms... (attempt 3/3)
Error classifying batch: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-001:generateContent: [429 Too Many Requests] Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
  âŒ Error processing batch: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-001:generateContent: [429 Too Many Requests] Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.

ğŸ“¦ Fetched 100 markets from database (offset: 100)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
âš ï¸  Rate limit hit, retrying in 20000ms... (attempt 3/3)
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
âš ï¸  Rate limit hit, retrying in 20000ms... (attempt 3/3)
  âœ… Classified and updated 50 markets

ğŸ“¦ Fetched 100 markets from database (offset: 200)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
  âœ… Classified and updated 50 markets

ğŸ“¦ Fetched 100 markets from database (offset: 300)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
âš ï¸  Rate limit hit, retrying in 20000ms... (attempt 3/3)
Error classifying batch: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-001:generateContent: [429 Too Many Requests] Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
  âŒ Error processing batch: [GoogleGenerativeAI Error]: Error fetching from https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-001:generateContent: [429 Too Many Requests] Resource exhausted. Please try again later. Please refer to https://cloud.google.com/vertex-ai/generative-ai/docs/error-code-429 for more details.
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
  âœ… Classified and updated 50 markets

ğŸ“¦ Fetched 100 markets from database (offset: 400)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
  âœ… Classified and updated 50 markets

ğŸ“¦ Fetched 100 markets from database (offset: 500)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
  âœ… Classified and updated 50 markets

ğŸ“¦ Fetched 100 markets from database (offset: 600)
  ğŸ”„ Processing Gemini batch 1/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
  âœ… Classified and updated 50 markets
  ğŸ”„ Processing Gemini batch 2/2 (50 markets)...
âš ï¸  Rate limit hit, retrying in 5000ms... (attempt 1/3)
âš ï¸  Rate limit hit, retrying in 10000ms... (attempt 2/3)
âš ï¸  Rate limit hit, retrying in 20000ms... (attempt 3/3)
